!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("JDate",[],e):"object"==typeof exports?exports.JDate=e():t.JDate=e()}(this,(()=>(()=>{var t={51:t=>{t.exports={MONTH_NAMES:["فروردین","اردیبهشت","خرداد","تیر","امرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],ABBR_DAYS:["۱ش","۲ش","۳ش","۴ش","۵ش","ج","ش"],DAYS_NAMES:["یکشنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنج‌شنبه","جمعه","شنبه"],GREGORIAN_EPOCH:1721425.5,PERSIAN_EPOCH:1948320.5,NON_LEAP_CORRECTION:[1502,1601,1634,1667,1700,1733,1766,1799,1832,1865,1898,1931,1964,1997,2030,2059,2063,2096,2129,2158,2162,2191,2195,2224,2228,2257,2261,2290,2294,2323,2327,2356,2360,2389,2393,2422,2426,2455,2459,2488,2492,2521,2525,2554,2558,2587,2591,2620,2624,2653,2657,2686,2690,2719,2723,2748,2752,2756,2781,2785,2789,2818,2822,2847,2851,2855,2880,2884,2888,2913,2917,2921,2946,2950,2954,2979,2983,2987]}}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,r),o.exports}r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var n={};return(()=>{"use strict";r.d(n,{default:()=>g});var t=r(51);function e(t,e){return t-Math.floor(t/e)*e}function a(t){return t&&1===t.length?"0".concat(t):t}function o(t,e){var r=t.match(/[yY]+/);if(!r)return t;switch(r[0]){case"YYYY":case"YYY":return o(t.replace(r,e.getFullYear()),e);case"YY":return o(t.replace(r,String(e.getFullYear()).slice(2)),e);default:return t}}function i(e,r){var n=e.match(/[mM]+/);if(!n)return e;switch(n[0]){case"M":return i(e.replace(n,r.getMonth()),r);case"MM":var o=a(r.getMonth().toString());return i(e.replace(n,o),r);case"MMM":case"MMMM":return i(e.replace(n,t.MONTH_NAMES[r.getMonth()-1]),r);default:return e}}function u(e,r){var n=e.match(/[dD]+/);if(!n)return e;switch(n[0]){case"D":return u(e.replace(n,r.getDate()),r);case"DD":var o=a(r.getDate().toString());return u(e.replace(n,o),r);case"d":case"dd":return u(e.replace(n,t.ABBR_DAYS[r.getDay()]),r);case"ddd":case"dddd":return u(e.replace(n,t.DAYS_NAMES[r.getDay()]),r);default:return e}}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function c(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}var s=function(){function r(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r)}return n=r,a=[{key:"leapGregorian",value:function(t){return t%4==0&&!(t%100==0&&t%400!=0)}},{key:"gregorianToJulian",value:function(e,n,a){var o;return o=n<=2?0:r.leapGregorian(e)?-1:-2,t.GREGORIAN_EPOCH-1+365*(e-1)+Math.floor((e-1)/4)+-Math.floor((e-1)/100)+Math.floor((e-1)/400)+Math.floor((367*n-362)/12+(o+a))}},{key:"julianToGregorian",value:function(n){var a=Math.floor(n-.5)+.5,o=a-t.GREGORIAN_EPOCH,i=Math.floor(o/146097),u=e(o,146097),l=Math.floor(u/36524),f=e(u,36524),c=Math.floor(f/1461),s=e(f,1461),y=Math.floor(s/365),p=400*i+100*l+4*c+y;4!==l&&4!==y&&(p+=1);var h,v=a-r.gregorianToJulian(p,1,1);h=a<r.gregorianToJulian(p,3,1)?0:(r.leapGregorian(p),1);var g=Math.floor((12*(v+h)+373)/367);return[p,g,a-r.gregorianToJulian(p,g,1)+1]}},{key:"leapPersian",value:function(e){return!t.NON_LEAP_CORRECTION.includes(e)&&(!!t.NON_LEAP_CORRECTION.includes(e-1)||(25*e+11)%33<8)}},{key:"persianToJulian",value:function(r,n,a){var o=r-(r>=0?474:473),i=474+e(o,2820);return a+(n<=7?31*(n-1):30*(n-1)+6)+Math.floor((682*i-110)/2816)+365*(i-1)+1029983*Math.floor(o/2820)+(t.PERSIAN_EPOCH-1)}},{key:"julianToPersian",value:function(t){var n,a=Math.floor(t)+.5,o=a-r.persianToJulian(475,1,1),i=Math.floor(o/1029983),u=e(o,1029983);if(1029982===u)n=2820;else{var l=Math.floor(u/366),f=e(u,366);n=Math.floor((2134*l+2816*f+2815)/1028522)+l+1}var c=n+2820*i+474;c<=0&&(c-=1);var s=a-r.persianToJulian(c,1,1)+1,y=s<=186?Math.ceil(s/31):Math.ceil((s-6)/30);return[c,y,a-r.persianToJulian(c,y,1)+1]}},{key:"persianToGregorian",value:function(t,e,n){var a=r.persianToJulian(t,e,n);return r.julianToGregorian(a)}},{key:"gregorianToPersian",value:function(t,e,n){var a=r.gregorianToJulian(t,e,n);return r.julianToPersian(a)}}],null&&f(n.prototype,null),a&&f(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a}();function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function v(t){var e=function(t,e){if("object"!=y(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==y(e)?e:e+""}var g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(Array.isArray(r[0])||r[0]instanceof Date)this.input=r[0];else if(3===r.length)this.input=r;else{if(r.length)throw new Error("Unexpected input");this.input=new Date}Array.isArray(this.input)?(this.date=this.input.map((function(t){return parseInt(t,10)})),this._d=this.toGregorian()):this.input instanceof Date&&(this._d=this.input,this.date=t.toJalali(this.input))}return e=t,n=[{key:"toJalali",value:function(t){var e=s.gregorianToJulian(t.getFullYear(),t.getMonth()+1,t.getDate());return s.julianToPersian(e)}},{key:"to_jalali",value:function(e){return t.toJalali(e)}},{key:"toGregorian",value:function(t,e,r){var n=s.julianToGregorian(s.persianToJulian(t,e,r));return new Date(+n[0],+n[1]-1,+n[2])}},{key:"to_gregorian",value:function(e,r,n){return t.toGregorian(e,r,n)}},{key:"isLeapYear",value:function(t){return s.leapPersian(t)}},{key:"daysInMonth",value:function(e,r){var n=e-Math.floor(r/12),a=r-12*Math.floor(r/12);return a<0?(a+=12,n-=1):0===a&&(a=12),a<6?31:a<11||t.isLeapYear(n)?30:29}}],(r=[{key:"toGregorian",value:function(){return t.toGregorian(this.date[0],this.date[1],this.date[2])}},{key:"getFullYear",value:function(){return this.date[0]}},{key:"setFullYear",value:function(t){return this.date[0]=parseInt(t,10),this.input=this.toGregorian(),this}},{key:"getMonth",value:function(){return this.date[1]}},{key:"setMonth",value:function(t){var e=function(t,e){if(e>12||e<=0){var r=Math.floor((e-1)/12);return[t-r,e-12*r]}return[t,e]}(this.getFullYear(),parseInt(t,10)),r=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,i,u=[],l=!0,f=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);l=!0);}catch(t){f=!0,a=t}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(f)throw a}}return u}}(t,e)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2);return this.date[0]=r[0],this.date[1]=r[1],this.input=this.toGregorian(),this}},{key:"getDate",value:function(){return this.date[2]}},{key:"setDate",value:function(t){return this.date[2]=parseInt(t,10),this.input=this.toGregorian(),this}},{key:"getDay",value:function(){return this._d.getDay()}},{key:"format",value:function(t){var e=o(t,this);return u(e=i(e,this),this)}}])&&h(e.prototype,r),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}()})(),n.default})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUtvQyxLQUFLLEdBQUs4RCxTQUFTOUQsRUFBTSxJQUM5QnBDLEtBQUs4RixNQUFROUYsS0FBS29HLGNBRVhwRyxJQUNULEdBRUEsQ0FBQWUsSUFBQSxTQUFBcUMsTUFLQSxXQUNFLE9BQU9wRCxLQUFLbUcsR0FBR2xELFFBQ2pCLEdBRUEsQ0FBQWxDLElBQUEsU0FBQXFDLE1BTUEsU0FBTzZELEdBQ0wsSUFBSUMsRUFBU0osRUFBb0JHLEVBQVFqSCxNQUl6QyxPQUZTOEcsRUFEVEksRUFBU0osRUFBcUJJLEVBQVFsSCxNQUNGQSxLQUd0QyxNLHlGQWhHQyxDQWhHdUIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL0pEYXRlL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9KRGF0ZS8uL3NyYy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vSkRhdGUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vSkRhdGUvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL0pEYXRlL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vSkRhdGUvLi9zcmMvaGVscGVycy5qcyIsIndlYnBhY2s6Ly9KRGF0ZS8uL3NyYy9jb252ZXJ0ZXIuanMiLCJ3ZWJwYWNrOi8vSkRhdGUvLi9zcmMvamRhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJKRGF0ZVwiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJKRGF0ZVwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJKRGF0ZVwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsICgpID0+IHtcbnJldHVybiAiLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgTU9OVEhfTkFNRVM6IFsn2YHYsdmI2LHYr9uM2YYnLCAn2KfYsdiv24zYqNmH2LTYqicsICfYrtix2K/Yp9ivJywgJ9iq24zYsScsICfYp9mF2LHYr9in2K8nLCAn2LTZh9ix24zZiNixJywgJ9mF2YfYsScsICfYotio2KfZhicsICfYotiw2LEnLCAn2K/bjCcsICfYqNmH2YXZhicsICfYp9iz2YHZhtivJ10sXG4gIEFCQlJfREFZUzogWyfbsdi0JywgJ9uy2LQnLCAn27PYtCcsICfbtNi0JywgJ9u12LQnLCAn2KwnLCAn2LQnXSxcbiAgREFZU19OQU1FUzogWyfbjNqp2LTZhtio2YcnLCAn2K/ZiNi02YbYqNmHJywgJ9iz2YfigIzYtNmG2KjZhycsICfahtmH2KfYsdi02YbYqNmHJywgJ9m+2YbYrOKAjNi02YbYqNmHJywgJ9is2YXYudmHJywgJ9i02YbYqNmHJ10sXG4gIEdSRUdPUklBTl9FUE9DSDogMTcyMTQyNS41LFxuICBQRVJTSUFOX0VQT0NIOiAxOTQ4MzIwLjUsXG4gIE5PTl9MRUFQX0NPUlJFQ1RJT046IFtcbiAgICAxNTAyLFxuICAgIDE2MDEsIDE2MzQsIDE2NjcsXG4gICAgMTcwMCwgMTczMywgMTc2NiwgMTc5OSxcbiAgICAxODMyLCAxODY1LCAxODk4LFxuICAgIDE5MzEsIDE5NjQsIDE5OTcsXG4gICAgMjAzMCwgMjA1OSwgMjA2MywgMjA5NixcbiAgICAyMTI5LCAyMTU4LCAyMTYyLCAyMTkxLCAyMTk1LFxuICAgIDIyMjQsIDIyMjgsIDIyNTcsIDIyNjEsIDIyOTAsIDIyOTQsXG4gICAgMjMyMywgMjMyNywgMjM1NiwgMjM2MCwgMjM4OSwgMjM5MyxcbiAgICAyNDIyLCAyNDI2LCAyNDU1LCAyNDU5LCAyNDg4LCAyNDkyLFxuICAgIDI1MjEsIDI1MjUsIDI1NTQsIDI1NTgsIDI1ODcsIDI1OTEsXG4gICAgMjYyMCwgMjYyNCwgMjY1MywgMjY1NywgMjY4NiwgMjY5MCxcbiAgICAyNzE5LCAyNzIzLCAyNzQ4LCAyNzUyLCAyNzU2LCAyNzgxLCAyNzg1LCAyNzg5LFxuICAgIDI4MTgsIDI4MjIsIDI4NDcsIDI4NTEsIDI4NTUsIDI4ODAsIDI4ODQsIDI4ODgsXG4gICAgMjkxMywgMjkxNywgMjkyMSwgMjk0NiwgMjk1MCwgMjk1NCwgMjk3OSwgMjk4MywgMjk4N1xuICBdXG59O1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuXG5pbXBvcnQge1xuICBNT05USF9OQU1FUyxcbiAgQUJCUl9EQVlTLFxuICBEQVlTX05BTUVTXG59IGZyb20gJy4vY29uc3RhbnRzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGRpdihhLCBiKSB7XG4gIHJldHVybiBNYXRoLmZsb29yKGEgLyBiKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1vZChhLCBiKSB7XG4gIHJldHVybiBhIC0gKE1hdGguZmxvb3IoYSAvIGIpICogYik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaXhNb250aCh5ZWFyLCBtb250aCkge1xuICBpZiAobW9udGggPiAxMiB8fCBtb250aCA8PSAwKSB7XG4gICAgY29uc3QgeWVhckRpZmYgPSBNYXRoLmZsb29yKChtb250aCAtIDEpIC8gMTIpO1xuICAgIGNvbnN0IG5ld1llYXIgPSB5ZWFyIC0geWVhckRpZmY7XG4gICAgY29uc3QgbmV3TW9udGggPSBtb250aCAtICh5ZWFyRGlmZiAqIDEyKTtcblxuICAgIHJldHVybiBbbmV3WWVhciwgbmV3TW9udGhdO1xuICB9XG5cbiAgcmV0dXJuIFt5ZWFyLCBtb250aF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB6ZXJvTGVhZGluZyhzdHIpIHtcbiAgaWYgKHN0ciAmJiBzdHIubGVuZ3RoID09PSAxKSB7IHJldHVybiBgMCR7c3RyfWA7IH1cbiAgcmV0dXJuIHN0cjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VZZWFyKHN0ciwgZGF0ZSkge1xuICBjb25zdCBtYXRjaCA9IHN0ci5tYXRjaCgvW3lZXSsvKTtcbiAgaWYgKCFtYXRjaCkgeyByZXR1cm4gc3RyOyB9XG4gIHN3aXRjaCAobWF0Y2hbMF0pIHtcbiAgICBjYXNlICdZWVlZJzpcbiAgICBjYXNlICdZWVknOiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHJlcGxhY2VZZWFyKHN0ci5yZXBsYWNlKG1hdGNoLCBkYXRlLmdldEZ1bGxZZWFyKCkpLCBkYXRlKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY2FzZSAnWVknOiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHJlcGxhY2VZZWFyKFxuICAgICAgICBzdHIucmVwbGFjZShtYXRjaCwgU3RyaW5nKGRhdGUuZ2V0RnVsbFllYXIoKSkuc2xpY2UoMikpLCBkYXRlXG4gICAgICApO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBkZWZhdWx0OiB7XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZU1vbnRoKHN0ciwgZGF0ZSkge1xuICBjb25zdCBtYXRjaCA9IHN0ci5tYXRjaCgvW21NXSsvKTtcbiAgaWYgKCFtYXRjaCkgeyByZXR1cm4gc3RyOyB9XG4gIHN3aXRjaCAobWF0Y2hbMF0pIHtcbiAgICBjYXNlICdNJzoge1xuICAgICAgY29uc3QgdmFsdWUgPSByZXBsYWNlTW9udGgoc3RyLnJlcGxhY2UobWF0Y2gsIGRhdGUuZ2V0TW9udGgoKSksIGRhdGUpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjYXNlICdNTSc6IHtcbiAgICAgIGNvbnN0IHplcm9MZWFkaW5nTW9udGggPSB6ZXJvTGVhZGluZyhkYXRlLmdldE1vbnRoKCkudG9TdHJpbmcoKSk7XG4gICAgICBjb25zdCB2YWx1ZSA9IHJlcGxhY2VNb250aChzdHIucmVwbGFjZShtYXRjaCwgemVyb0xlYWRpbmdNb250aCksIGRhdGUpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjYXNlICdNTU0nOlxuICAgIGNhc2UgJ01NTU0nOiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHJlcGxhY2VNb250aChcbiAgICAgICAgc3RyLnJlcGxhY2UobWF0Y2gsIE1PTlRIX05BTUVTW2RhdGUuZ2V0TW9udGgoKSAtIDFdKSwgZGF0ZVxuICAgICAgKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VEYXkoc3RyLCBkYXRlKSB7XG4gIGNvbnN0IG1hdGNoID0gc3RyLm1hdGNoKC9bZERdKy8pO1xuICBpZiAoIW1hdGNoKSB7IHJldHVybiBzdHI7IH1cbiAgc3dpdGNoIChtYXRjaFswXSkge1xuICAgIGNhc2UgJ0QnOiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHJlcGxhY2VEYXkoc3RyLnJlcGxhY2UobWF0Y2gsIGRhdGUuZ2V0RGF0ZSgpKSwgZGF0ZSk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGNhc2UgJ0REJzoge1xuICAgICAgY29uc3QgemVyb0xlYWRpbmdEYXRlID0gemVyb0xlYWRpbmcoZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKSk7XG4gICAgICBjb25zdCB2YWx1ZSA9IHJlcGxhY2VEYXkoc3RyLnJlcGxhY2UobWF0Y2gsIHplcm9MZWFkaW5nRGF0ZSksIGRhdGUpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjYXNlICdkJzpcbiAgICBjYXNlICdkZCc6IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gcmVwbGFjZURheShzdHIucmVwbGFjZShtYXRjaCwgQUJCUl9EQVlTW2RhdGUuZ2V0RGF5KCldKSwgZGF0ZSk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGNhc2UgJ2RkZCc6XG4gICAgY2FzZSAnZGRkZCc6IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gcmVwbGFjZURheShzdHIucmVwbGFjZShtYXRjaCwgREFZU19OQU1FU1tkYXRlLmdldERheSgpXSksIGRhdGUpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBkZWZhdWx0OiB7XG4gICAgICByZXR1cm4gc3RyO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgbW9kIH0gZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCB7IEdSRUdPUklBTl9FUE9DSCwgUEVSU0lBTl9FUE9DSCwgTk9OX0xFQVBfQ09SUkVDVElPTiB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29udmVydGVyIHtcbiAgLy8gIExFQVBfR1JFR09SSUFOICAtLSAgSXMgYSBnaXZlbiB5ZWFyIGluIHRoZSBHcmVnb3JpYW4gY2FsZW5kYXIgYSBsZWFwIHllYXI/XG4gIHN0YXRpYyBsZWFwR3JlZ29yaWFuKHllYXIpIHtcbiAgICByZXR1cm4gKCh5ZWFyICUgNCkgPT09IDApXG4gICAgICAmJiAoISgoKHllYXIgJSAxMDApID09PSAwKSAmJiAoKHllYXIgJSA0MDApICE9PSAwKSkpO1xuICB9XG5cbiAgLy8gR1JFR09SSUFOX1RPX0pEICAtLSAgRGV0ZXJtaW5lIEp1bGlhbiBkYXkgbnVtYmVyIGZyb20gR3JlZ29yaWFuIGNhbGVuZGFyIGRhdGVcbiAgc3RhdGljIGdyZWdvcmlhblRvSnVsaWFuKHllYXIsIG1vbnRoLCBkYXkpIHtcbiAgICBsZXQgcGFkO1xuICAgIGlmIChtb250aCA8PSAyKSB7XG4gICAgICBwYWQgPSAwO1xuICAgIH0gZWxzZSBpZiAoQ29udmVydGVyLmxlYXBHcmVnb3JpYW4oeWVhcikpIHtcbiAgICAgIHBhZCA9IC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYWQgPSAtMjtcbiAgICB9XG5cbiAgICByZXR1cm4gKEdSRUdPUklBTl9FUE9DSCAtIDEpXG4gICAgICArICgzNjUgKiAoeWVhciAtIDEpKVxuICAgICAgKyBNYXRoLmZsb29yKCh5ZWFyIC0gMSkgLyA0KVxuICAgICAgKyAoLU1hdGguZmxvb3IoKHllYXIgLSAxKSAvIDEwMCkpXG4gICAgICArIE1hdGguZmxvb3IoKHllYXIgLSAxKSAvIDQwMClcbiAgICAgICsgTWF0aC5mbG9vcigoKCgzNjcgKiBtb250aCkgLSAzNjIpIC8gMTIpICsgKHBhZCArIGRheSkpO1xuICB9XG5cbiAgLy8gIEpEX1RPX0dSRUdPUklBTiAgLS0gIENhbGN1bGF0ZSBHcmVnb3JpYW4gY2FsZW5kYXIgZGF0ZSBmcm9tIEp1bGlhbiBkYXlcbiAgc3RhdGljIGp1bGlhblRvR3JlZ29yaWFuKGpkKSB7XG4gICAgY29uc3Qgd2pkID0gTWF0aC5mbG9vcihqZCAtIDAuNSkgKyAwLjU7XG4gICAgY29uc3QgZGVwb2NoID0gd2pkIC0gR1JFR09SSUFOX0VQT0NIO1xuICAgIGNvbnN0IHF1YWRyaWNlbnQgPSBNYXRoLmZsb29yKGRlcG9jaCAvIDE0NjA5Nyk7XG4gICAgY29uc3QgZHFjID0gbW9kKGRlcG9jaCwgMTQ2MDk3KTtcbiAgICBjb25zdCBjZW50ID0gTWF0aC5mbG9vcihkcWMgLyAzNjUyNCk7XG4gICAgY29uc3QgZGNlbnQgPSBtb2QoZHFjLCAzNjUyNCk7XG4gICAgY29uc3QgcXVhZCA9IE1hdGguZmxvb3IoZGNlbnQgLyAxNDYxKTtcbiAgICBjb25zdCBkcXVhZCA9IG1vZChkY2VudCwgMTQ2MSk7XG4gICAgY29uc3QgeWluZGV4ID0gTWF0aC5mbG9vcihkcXVhZCAvIDM2NSk7XG4gICAgbGV0IHllYXIgPSAocXVhZHJpY2VudCAqIDQwMCkgKyAoY2VudCAqIDEwMCkgKyAocXVhZCAqIDQpICsgeWluZGV4O1xuICAgIGlmICghKChjZW50ID09PSA0KSB8fCAoeWluZGV4ID09PSA0KSkpIHsgeWVhciArPSAxOyB9XG4gICAgY29uc3QgeWVhcmRheSA9IHdqZCAtIENvbnZlcnRlci5ncmVnb3JpYW5Ub0p1bGlhbih5ZWFyLCAxLCAxKTtcbiAgICBsZXQgbGVhcGFkajtcbiAgICBpZiAod2pkIDwgQ29udmVydGVyLmdyZWdvcmlhblRvSnVsaWFuKHllYXIsIDMsIDEpKSB7XG4gICAgICBsZWFwYWRqID0gMDtcbiAgICB9IGVsc2UgaWYgKENvbnZlcnRlci5sZWFwR3JlZ29yaWFuKHllYXIpID8gMSA6IDIpIHtcbiAgICAgIGxlYXBhZGogPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZWFwYWRqID0gMjtcbiAgICB9XG4gICAgY29uc3QgbW9udGggPSBNYXRoLmZsb29yKCgoKHllYXJkYXkgKyBsZWFwYWRqKSAqIDEyKSArIDM3MykgLyAzNjcpO1xuICAgIGNvbnN0IGRheSA9ICh3amQgLSBDb252ZXJ0ZXIuZ3JlZ29yaWFuVG9KdWxpYW4oeWVhciwgbW9udGgsIDEpKSArIDE7XG5cbiAgICByZXR1cm4gW3llYXIsIG1vbnRoLCBkYXldO1xuICB9XG5cbiAgLy8gIExFQVBfUEVSU0lBTiAgLS0gIElzIGEgZ2l2ZW4geWVhciBhIGxlYXAgeWVhciBpbiB0aGUgUGVyc2lhbiBjYWxlbmRhciA/XG4gIHN0YXRpYyBsZWFwUGVyc2lhbih5ZWFyKSB7XG4gICAgaWYgKE5PTl9MRUFQX0NPUlJFQ1RJT04uaW5jbHVkZXMoeWVhcikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGlmIChOT05fTEVBUF9DT1JSRUNUSU9OLmluY2x1ZGVzKHllYXIgLSAxKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuICgyNSAqIHllYXIgKyAxMSkgJSAzMyA8IDg7XG4gIH1cblxuICAvLyAgUEVSU0lBTl9UT19KRCAgLS0gIERldGVybWluZSBKdWxpYW4gZGF5IGZyb20gUGVyc2lhbiBkYXRlXG4gIHN0YXRpYyBwZXJzaWFuVG9KdWxpYW4oeWVhciwgbW9udGgsIGRheSkge1xuICAgIGNvbnN0IGVwYmFzZSA9IHllYXIgLSAoKHllYXIgPj0gMCkgPyA0NzQgOiA0NzMpO1xuICAgIGNvbnN0IGVweWVhciA9IDQ3NCArIG1vZChlcGJhc2UsIDI4MjApO1xuXG4gICAgcmV0dXJuIGRheVxuICAgICAgKyAoKG1vbnRoIDw9IDcpXG4gICAgICAgID8gKChtb250aCAtIDEpICogMzEpXG4gICAgICAgIDogKCgobW9udGggLSAxKSAqIDMwKSArIDYpXG4gICAgICApXG4gICAgICArIE1hdGguZmxvb3IoKChlcHllYXIgKiA2ODIpIC0gMTEwKSAvIDI4MTYpXG4gICAgICArICgoZXB5ZWFyIC0gMSkgKiAzNjUpXG4gICAgICArIChNYXRoLmZsb29yKGVwYmFzZSAvIDI4MjApICogMTAyOTk4MykgKyAoUEVSU0lBTl9FUE9DSCAtIDEpO1xuICB9XG5cbiAgLy8gIEpEX1RPX1BFUlNJQU4gIC0tICBDYWxjdWxhdGUgUGVyc2lhbiBkYXRlIGZyb20gSnVsaWFuIGRheVxuICBzdGF0aWMganVsaWFuVG9QZXJzaWFuKGpkKSB7XG4gICAgY29uc3QgbmpkID0gTWF0aC5mbG9vcihqZCkgKyAwLjU7XG4gICAgY29uc3QgZGVwb2NoID0gbmpkIC0gQ29udmVydGVyLnBlcnNpYW5Ub0p1bGlhbig0NzUsIDEsIDEpO1xuICAgIGNvbnN0IGN5Y2xlID0gTWF0aC5mbG9vcihkZXBvY2ggLyAxMDI5OTgzKTtcbiAgICBjb25zdCBjeWVhciA9IG1vZChkZXBvY2gsIDEwMjk5ODMpO1xuICAgIGxldCB5Y3ljbGU7XG4gICAgaWYgKGN5ZWFyID09PSAxMDI5OTgyKSB7XG4gICAgICB5Y3ljbGUgPSAyODIwO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhdXgxID0gTWF0aC5mbG9vcihjeWVhciAvIDM2Nik7XG4gICAgICBjb25zdCBhdXgyID0gbW9kKGN5ZWFyLCAzNjYpO1xuICAgICAgeWN5Y2xlID0gTWF0aC5mbG9vcigoKDIxMzQgKiBhdXgxKSArICgyODE2ICogYXV4MikgKyAyODE1KSAvIDEwMjg1MjIpXG4gICAgICAgICsgYXV4MSArIDE7XG4gICAgfVxuICAgIGxldCB5ZWFyID0geWN5Y2xlICsgKDI4MjAgKiBjeWNsZSkgKyA0NzQ7XG4gICAgaWYgKHllYXIgPD0gMCkge1xuICAgICAgeWVhciAtPSAxO1xuICAgIH1cbiAgICBjb25zdCB5ZGF5ID0gKG5qZCAtIENvbnZlcnRlci5wZXJzaWFuVG9KdWxpYW4oeWVhciwgMSwgMSkpICsgMTtcbiAgICBjb25zdCBtb250aCA9ICh5ZGF5IDw9IDE4NikgPyBNYXRoLmNlaWwoeWRheSAvIDMxKSA6IE1hdGguY2VpbCgoeWRheSAtIDYpIC8gMzApO1xuICAgIGNvbnN0IGRheSA9IChuamQgLSBDb252ZXJ0ZXIucGVyc2lhblRvSnVsaWFuKHllYXIsIG1vbnRoLCAxKSkgKyAxO1xuXG4gICAgcmV0dXJuIFt5ZWFyLCBtb250aCwgZGF5XTtcbiAgfVxuXG4gIHN0YXRpYyBwZXJzaWFuVG9HcmVnb3JpYW4oeWVhciwgbW9udGgsIGRheSkge1xuICAgIGNvbnN0IGp1bGlhbiA9IENvbnZlcnRlci5wZXJzaWFuVG9KdWxpYW4oeWVhciwgbW9udGgsIGRheSk7XG5cbiAgICByZXR1cm4gQ29udmVydGVyLmp1bGlhblRvR3JlZ29yaWFuKGp1bGlhbik7XG4gIH1cblxuICBzdGF0aWMgZ3JlZ29yaWFuVG9QZXJzaWFuKHllYXIsIG1vbnRoLCBkYXkpIHtcbiAgICBjb25zdCBqdWxpYW4gPSBDb252ZXJ0ZXIuZ3JlZ29yaWFuVG9KdWxpYW4oeWVhciwgbW9udGgsIGRheSk7XG5cbiAgICByZXR1cm4gQ29udmVydGVyLmp1bGlhblRvUGVyc2lhbihqdWxpYW4pO1xuICB9XG59XG4iLCIvKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2FyYXNobS9KRGF0ZVxuICogQGF1dGhvcjogQXJhc2ggTW91c2F2aVxuICovXG5cbmltcG9ydCBDb252ZXJ0ZXIgZnJvbSAnLi9jb252ZXJ0ZXInO1xuaW1wb3J0ICogYXMgaGVscGVycyBmcm9tICcuL2hlbHBlcnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBKRGF0ZSB7XG4gIGNvbnN0cnVjdG9yKC4uLmFyZ3MpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmdzWzBdKSB8fCBhcmdzWzBdIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgW3RoaXMuaW5wdXRdID0gYXJncztcbiAgICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09PSAzKSB7XG4gICAgICB0aGlzLmlucHV0ID0gYXJncztcbiAgICB9IGVsc2UgaWYgKCFhcmdzLmxlbmd0aCkge1xuICAgICAgdGhpcy5pbnB1dCA9IG5ldyBEYXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVW5leHBlY3RlZCBpbnB1dCcpO1xuICAgIH1cblxuICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuaW5wdXQpKSB7XG4gICAgICB0aGlzLmRhdGUgPSB0aGlzLmlucHV0Lm1hcCgobnVtKSA9PiBwYXJzZUludChudW0sIDEwKSk7XG4gICAgICB0aGlzLl9kID0gdGhpcy50b0dyZWdvcmlhbigpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pbnB1dCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgIHRoaXMuX2QgPSB0aGlzLmlucHV0O1xuICAgICAgdGhpcy5kYXRlID0gSkRhdGUudG9KYWxhbGkodGhpcy5pbnB1dCk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogQ292ZXJ0cyBhIEdyZWdvcmlhbiBkYXRlIHRvIEphbGFsaSBkYXRlXG4gICAqXG4gICAqIEBwYXJhbXMge0RhdGV9IGRhdGVcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBzdGF0aWMgdG9KYWxhbGkoZGF0ZSkge1xuICAgIGNvbnN0IGp1bGlhbkRhdGUgPSBDb252ZXJ0ZXIuZ3JlZ29yaWFuVG9KdWxpYW4oXG4gICAgICBkYXRlLmdldEZ1bGxZZWFyKCksXG4gICAgICBkYXRlLmdldE1vbnRoKCkgKyAxLFxuICAgICAgZGF0ZS5nZXREYXRlKClcbiAgICApO1xuICAgIGNvbnN0IGpkYXRlID0gQ29udmVydGVyLmp1bGlhblRvUGVyc2lhbihqdWxpYW5EYXRlKTtcblxuICAgIHJldHVybiBqZGF0ZTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2VcbiAgc3RhdGljIHRvX2phbGFsaShkYXRlKSB7IHJldHVybiBKRGF0ZS50b0phbGFsaShkYXRlKTsgfVxuXG4gIC8qXG4gICAqIGNvbnZlcnRzIGEgSmFsYWxpIGRhdGUgdG8gR3JlZ29yaWFuXG4gICAqXG4gICAqIEBwYXJhbXMge051bWJlcn0geWVhclxuICAgKiBAcGFyYW1zIHtOdW1iZXJ9IG1vbnRoXG4gICAqIEBwYXJhbXMge051bWJlcn0gZGF5XG4gICAqIEByZXR1cm4ge0RhdGV9XG4gICAqL1xuICBzdGF0aWMgdG9HcmVnb3JpYW4oeWVhciwgbW9udGgsIGRheSkge1xuICAgIGNvbnN0IGdkYXRlID0gQ29udmVydGVyLmp1bGlhblRvR3JlZ29yaWFuKFxuICAgICAgQ29udmVydGVyLnBlcnNpYW5Ub0p1bGlhbih5ZWFyLCBtb250aCwgZGF5KVxuICAgICk7XG5cbiAgICByZXR1cm4gbmV3IERhdGUoK2dkYXRlWzBdLCArZ2RhdGVbMV0gLSAxLCArZ2RhdGVbMl0pO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxuICBzdGF0aWMgdG9fZ3JlZ29yaWFuKHllYXIsIG1vbnRoLCBkYXkpIHsgcmV0dXJuIEpEYXRlLnRvR3JlZ29yaWFuKHllYXIsIG1vbnRoLCBkYXkpOyB9XG5cbiAgLypcbiAgICogQ2hlY2tzIGlmIGEgZ2l2ZW4geWVhciBpcyBhIGxlYXAgeWVhciBvciBub3RcbiAgICpcbiAgICogQHBhcmFtcyB7TnVtYmVyfSB5ZWFyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBzdGF0aWMgaXNMZWFwWWVhcih5ZWFyKSB7XG4gICAgcmV0dXJuIENvbnZlcnRlci5sZWFwUGVyc2lhbih5ZWFyKTtcbiAgfVxuXG4gIC8qXG4gICAqIFJldHVybnMgbW9udGggbGVuZ3RoLlxuICAgKlxuICAgKiBAcGFyYW1zIHtOdW1iZXJ9IHllYXJcbiAgICogQHBhcmFtcyB7TnVtYmVyfSBtb250aCB6ZXJvIGJhc2VkXG4gICAqIEByZXR1cm4ge051bWJlcn1cbiAgICovXG4gIHN0YXRpYyBkYXlzSW5Nb250aCh5ZWFyLCBtb250aCkge1xuICAgIGxldCBjYWxjZWRZZWFyID0geWVhciAtIE1hdGguZmxvb3IobW9udGggLyAxMik7XG4gICAgbGV0IGNhbGNlZE1vbnRoID0gbW9udGggLSAoTWF0aC5mbG9vcihtb250aCAvIDEyKSAqIDEyKTtcblxuICAgIGlmIChjYWxjZWRNb250aCA8IDApIHtcbiAgICAgIGNhbGNlZE1vbnRoICs9IDEyO1xuICAgICAgY2FsY2VkWWVhciAtPSAxO1xuICAgIH0gZWxzZSBpZiAoY2FsY2VkTW9udGggPT09IDApIHtcbiAgICAgIGNhbGNlZE1vbnRoID0gMTI7XG4gICAgfVxuXG4gICAgaWYgKGNhbGNlZE1vbnRoIDwgNikge1xuICAgICAgcmV0dXJuIDMxO1xuICAgIH0gaWYgKGNhbGNlZE1vbnRoIDwgMTEpIHtcbiAgICAgIHJldHVybiAzMDtcbiAgICB9IGlmIChKRGF0ZS5pc0xlYXBZZWFyKGNhbGNlZFllYXIpKSB7XG4gICAgICByZXR1cm4gMzA7XG4gICAgfVxuICAgIHJldHVybiAyOTtcbiAgfVxuXG4gIC8qXG4gICAqIENvbnZlcnRzIEpEYXRlIGRhdGUgdG8gR3JlZ29yaWFuXG4gICAqL1xuICB0b0dyZWdvcmlhbigpIHtcbiAgICByZXR1cm4gSkRhdGUudG9HcmVnb3JpYW4odGhpcy5kYXRlWzBdLCB0aGlzLmRhdGVbMV0sIHRoaXMuZGF0ZVsyXSk7XG4gIH1cblxuICAvKlxuICAgKiBTaG93cyBKYWxhbGkncyBmdWxsIHllYXIsIGV4OiAxMzkzXG4gICAqXG4gICAqIEByZXR1cm4ge0ludGVnZXJ9XG4gICAqL1xuICBnZXRGdWxsWWVhcigpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRlWzBdO1xuICB9XG5cbiAgLypcbiAgICogU2V0cyB0aGUgSmFsYWxpIGZ1bGwgeWVhclxuICAgKlxuICAgKiBAcGFyYW1zIHtOdW1iZXJ9IHllYXJcbiAgICogQHJldHVybiB7SkRhdGV9XG4gICAqL1xuICBzZXRGdWxsWWVhcih5ZWFyKSB7XG4gICAgdGhpcy5kYXRlWzBdID0gcGFyc2VJbnQoeWVhciwgMTApO1xuICAgIHRoaXMuaW5wdXQgPSB0aGlzLnRvR3JlZ29yaWFuKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKlxuICAgKiBTaG93cyBKYWxhbGkgbW9udGggbnVtYmVyLlxuICAgKlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9IEphbGFsaSBtb250aCBudW1iZXJcbiAgICovXG4gIGdldE1vbnRoKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGVbMV07XG4gIH1cblxuICAvKlxuICAgKiBTZXRzIHRoZSBKYWxhbGkgbW9udGggbnVtYmVyLiBBbiBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgMTFcbiAgICpcbiAgICogQHBhcmFtcyB7TnVtYmVyfSBtb250aFxuICAgKiBAcmV0dXJucyB7SkRhdGV9XG4gICAqL1xuICBzZXRNb250aChtb250aCkge1xuICAgIGNvbnN0IGZpeGVkID0gaGVscGVycy5maXhNb250aCh0aGlzLmdldEZ1bGxZZWFyKCksIHBhcnNlSW50KG1vbnRoLCAxMCkpO1xuICAgIFt0aGlzLmRhdGVbMF0sIHRoaXMuZGF0ZVsxXV0gPSBmaXhlZDtcbiAgICB0aGlzLmlucHV0ID0gdGhpcy50b0dyZWdvcmlhbigpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKlxuICAgKiBTaG93cyBKYWxhbGkgZGF5IG51bWJlci4gQSBudW1iZXIgYmV0d2VlbiAwIHRvIDMxXG4gICAqXG4gICAqIEByZXR1cm4ge051bWJlcn0gSmFsYWxpIGRheSBudW1iZXJcbiAgICovXG4gIGdldERhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0ZVsyXTtcbiAgfVxuXG4gIC8qXG4gICAqIFNldHMgSmFsYWxpIGRheSBudW1iZXIuIEEgbnVtYmVyIGJldHdlZW4gMCB0byAzMVxuICAgKlxuICAgKiBAcGFyYW1zIHtOdW1iZXJ9IGRhdGVcbiAgICogQHJldHVybiB7SkRhdGV9XG4gICAqL1xuICBzZXREYXRlKGRhdGUpIHtcbiAgICB0aGlzLmRhdGVbMl0gPSBwYXJzZUludChkYXRlLCAxMCk7XG4gICAgdGhpcy5pbnB1dCA9IHRoaXMudG9HcmVnb3JpYW4oKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLypcbiAgICogUmV0dXJucyB0aGUgZGF5IG9mIHRoZSB3ZWVrIGZvciB0aGUgc3BlY2lmaWVkIGRhdGUuIEEgbnVtYmVyIGJldHdlZW4gMCB0byA2XG4gICAqXG4gICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAqL1xuICBnZXREYXkoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2QuZ2V0RGF5KCk7XG4gIH1cblxuICAvKlxuICAgKiBSZXR1cm5zIGEgZm9ybWF0ZWQgb3V0cHV0IG9mIGN1cnJlbnQgZGF0ZVxuICAgKlxuICAgKiBAcGFyYW1zIHtTdHJpbmd9IGZvcm1hdFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICBmb3JtYXQoZm9ybWF0KSB7XG4gICAgbGV0IHJlc3VsdCA9IGhlbHBlcnMucmVwbGFjZVllYXIoZm9ybWF0LCB0aGlzKTtcbiAgICByZXN1bHQgPSBoZWxwZXJzLnJlcGxhY2VNb250aChyZXN1bHQsIHRoaXMpO1xuICAgIHJlc3VsdCA9IGhlbHBlcnMucmVwbGFjZURheShyZXN1bHQsIHRoaXMpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInRoaXMiLCJNT05USF9OQU1FUyIsIkFCQlJfREFZUyIsIkRBWVNfTkFNRVMiLCJHUkVHT1JJQU5fRVBPQ0giLCJQRVJTSUFOX0VQT0NIIiwiTk9OX0xFQVBfQ09SUkVDVElPTiIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwibW9kIiwiYSIsImIiLCJNYXRoIiwiZmxvb3IiLCJ6ZXJvTGVhZGluZyIsInN0ciIsImxlbmd0aCIsImNvbmNhdCIsInJlcGxhY2VZZWFyIiwiZGF0ZSIsIm1hdGNoIiwicmVwbGFjZSIsImdldEZ1bGxZZWFyIiwiU3RyaW5nIiwic2xpY2UiLCJyZXBsYWNlTW9udGgiLCJnZXRNb250aCIsInplcm9MZWFkaW5nTW9udGgiLCJ0b1N0cmluZyIsInJlcGxhY2VEYXkiLCJnZXREYXRlIiwiemVyb0xlYWRpbmdEYXRlIiwiZ2V0RGF5IiwiQ29udmVydGVyIiwiX2NsYXNzQ2FsbENoZWNrIiwidmFsdWUiLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJwYWQiLCJsZWFwR3JlZ29yaWFuIiwiamQiLCJ3amQiLCJkZXBvY2giLCJxdWFkcmljZW50IiwiZHFjIiwiY2VudCIsImRjZW50IiwicXVhZCIsImRxdWFkIiwieWluZGV4IiwibGVhcGFkaiIsInllYXJkYXkiLCJncmVnb3JpYW5Ub0p1bGlhbiIsImluY2x1ZGVzIiwiZXBiYXNlIiwiZXB5ZWFyIiwieWN5Y2xlIiwibmpkIiwicGVyc2lhblRvSnVsaWFuIiwiY3ljbGUiLCJjeWVhciIsImF1eDEiLCJhdXgyIiwieWRheSIsImNlaWwiLCJqdWxpYW4iLCJqdWxpYW5Ub0dyZWdvcmlhbiIsImp1bGlhblRvUGVyc2lhbiIsIkpEYXRlIiwiX2xlbiIsImFyZ3VtZW50cyIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJpc0FycmF5IiwiRGF0ZSIsImlucHV0IiwiRXJyb3IiLCJtYXAiLCJudW0iLCJwYXJzZUludCIsIl9kIiwidG9HcmVnb3JpYW4iLCJ0b0phbGFsaSIsImp1bGlhbkRhdGUiLCJnZGF0ZSIsImxlYXBQZXJzaWFuIiwiY2FsY2VkWWVhciIsImNhbGNlZE1vbnRoIiwiaXNMZWFwWWVhciIsImZpeGVkIiwieWVhckRpZmYiLCJoZWxwZXJzIiwiX2ZpeGVkIiwiX3NsaWNlZFRvQXJyYXkiLCJmb3JtYXQiLCJyZXN1bHQiXSwic291cmNlUm9vdCI6IiJ9