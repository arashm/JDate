!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("JDate",[],t):"object"==typeof exports?exports.JDate=t():e.JDate=t()}(this,(function(){return(()=>{var e={843:e=>{e.exports={MONTH_NAMES:["فروردین","اردیبهشت","خرداد","تیر","امرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],ABBR_DAYS:["۱ش","۲ش","۳ش","۴ش","۵ش","ج","ش"],DAYS_NAMES:["یکشنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنج‌شنبه","جمعه","شنبه"],GREGORIAN_EPOCH:1721425.5,PERSIAN_EPOCH:1948320.5}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};return(()=>{"use strict";r.d(n,{default:()=>p});var e=r(843);function t(e,t){return e-Math.floor(e/t)*t}function a(e){return e&&1===e.length?"0".concat(e):e}function o(e,t){var r=e.match(/[yY]+/);if(!r)return e;switch(r[0]){case"YYYY":case"YYY":return o(e.replace(r,t.getFullYear()),t);case"YY":return o(e.replace(r,String(t.getFullYear()).slice(2)),t);default:return e}}function i(t,r){var n=t.match(/[mM]+/);if(!n)return t;switch(n[0]){case"M":return i(t.replace(n,r.getMonth()),r);case"MM":var o=a(r.getMonth().toString());return i(t.replace(n,o),r);case"MMM":case"MMMM":return i(t.replace(n,e.MONTH_NAMES[r.getMonth()-1]),r);default:return t}}function u(t,r){var n=t.match(/[dD]+/);if(!n)return t;switch(n[0]){case"D":return u(t.replace(n,r.getDate()),r);case"DD":var o=a(r.getDate().toString());return u(t.replace(n,o),r);case"d":case"dd":return u(t.replace(n,e.ABBR_DAYS[r.getDay()]),r);case"ddd":case"dddd":return u(t.replace(n,e.DAYS_NAMES[r.getDay()]),r);default:return t}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r)}var n,a;return n=r,a=[{key:"leapGregorian",value:function(e){return e%4==0&&!(e%100==0&&e%400!=0)}},{key:"gregorianToJulian",value:function(t,n,a){var o;return o=n<=2?0:r.leapGregorian(t)?-1:-2,e.GREGORIAN_EPOCH-1+365*(t-1)+Math.floor((t-1)/4)+-Math.floor((t-1)/100)+Math.floor((t-1)/400)+Math.floor((367*n-362)/12+(o+a))}},{key:"julianToGregorian",value:function(n){var a=Math.floor(n-.5)+.5,o=a-e.GREGORIAN_EPOCH,i=Math.floor(o/146097),u=t(o,146097),l=Math.floor(u/36524),f=t(u,36524),s=Math.floor(f/1461),c=t(f,1461),h=Math.floor(c/365),p=400*i+100*l+4*s+h;4!==l&&4!==h&&(p+=1);var v,g=a-r.gregorianToJulian(p,1,1);v=a<r.gregorianToJulian(p,3,1)?0:(r.leapGregorian(p),1);var y=Math.floor((12*(g+v)+373)/367);return[p,y,a-r.gregorianToJulian(p,y,1)+1]}},{key:"leapPersian",value:function(e){return 1403===e||682*((e-(e>0?474:473))%2820+474+38)%2816<682}},{key:"persianToJulian",value:function(r,n,a){var o=r-(r>=0?474:473),i=474+t(o,2820);return a+(n<=7?31*(n-1):30*(n-1)+6)+Math.floor((682*i-110)/2816)+365*(i-1)+1029983*Math.floor(o/2820)+(e.PERSIAN_EPOCH-1)}},{key:"julianToPersian",value:function(e){var n,a=Math.floor(e)+.5,o=a-r.persianToJulian(475,1,1),i=Math.floor(o/1029983),u=t(o,1029983);if(1029982===u)n=2820;else{var l=Math.floor(u/366),f=t(u,366);n=Math.floor((2134*l+2816*f+2815)/1028522)+l+1}var s=n+2820*i+474;s<=0&&(s-=1);var c=a-r.persianToJulian(s,1,1)+1,h=c<=186?Math.ceil(c/31):Math.ceil((c-6)/30);return[s,h,a-r.persianToJulian(s,h,1)+1]}},{key:"persianToGregorian",value:function(e,t,n){var a=r.persianToJulian(e,t,n);return r.julianToGregorian(a)}},{key:"gregorianToPersian",value:function(e,t,n){var a=r.gregorianToJulian(e,t,n);return r.julianToPersian(a)}}],null&&l(n.prototype,null),a&&l(n,a),r}();function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=function(){function e(){c(this,e);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(Array.isArray(r[0])||r[0]instanceof Date)this.input=r[0];else if(3===r.length)this.input=r;else{if(r.length)throw new Error("Unexpected input");this.input=new Date}Array.isArray(this.input)?(this.date=this.input.map((function(e){return parseInt(e,10)})),this._d=this.toGregorian()):this.input instanceof Date&&(this._d=this.input,this.date=e.toJalali(this.input))}var t,r,n;return t=e,n=[{key:"toJalali",value:function(e){var t=f.gregorianToJulian(e.getFullYear(),e.getMonth()+1,e.getDate());return f.julianToPersian(t)}},{key:"to_jalali",value:function(t){return e.toJalali(t)}},{key:"toGregorian",value:function(e,t,r){var n=f.julianToGregorian(f.persianToJulian(e,t,r));return new Date(+n[0],+n[1]-1,+n[2])}},{key:"to_gregorian",value:function(t,r,n){return e.toGregorian(t,r,n)}},{key:"isLeapYear",value:function(e){return f.leapPersian(e)}},{key:"daysInMonth",value:function(t,r){var n=t-Math.floor(r/12),a=r-12*Math.floor(r/12);return a<0?(a+=12,n-=1):0===a&&(a=12),a<6?31:a<11||e.isLeapYear(n)?30:29}}],(r=[{key:"toGregorian",value:function(){return e.toGregorian(this.date[0],this.date[1],this.date[2])}},{key:"getFullYear",value:function(){return this.date[0]}},{key:"setFullYear",value:function(e){return this.date[0]=parseInt(e,10),this.input=this.toGregorian(),this}},{key:"getMonth",value:function(){return this.date[1]}},{key:"setMonth",value:function(e){var t,r,n=function(e,t){if(t>12||t<=0){var r=Math.floor((t-1)/12);return[e-r,t-12*r]}return[e,t]}(this.getFullYear(),parseInt(e,10)),a=(r=2,function(e){if(Array.isArray(e))return e}(t=n)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,u=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(u)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return this.date[0]=a[0],this.date[1]=a[1],this.input=this.toGregorian(),this}},{key:"getDate",value:function(){return this.date[2]}},{key:"setDate",value:function(e){return this.date[2]=parseInt(e,10),this.input=this.toGregorian(),this}},{key:"getDay",value:function(){return this._d.getDay()}},{key:"format",value:function(e){var t=o(e,this);return u(t=i(t,this),this)}}])&&h(t.prototype,r),n&&h(t,n),e}()})(),n.default})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBR1YsT0FGQWpELEtBQUtrQyxLQUFLLEdBQUt3RCxTQUFTekMsRUFBTSxJQUM5QmpELEtBQUtzRixNQUFRdEYsS0FBSzRGLGNBQ1g1RixPLHNCQVFULFdBQ0UsT0FBT0EsS0FBS2tDLEtBQUssSyxzQkFTbkIsU0FBU2dCLEdBQ1AsSSxJQUFNa0QsRUZ0SUgsU0FBa0JuRCxFQUFNQyxHQUM3QixHQUFJQSxFQUFRLElBQU1BLEdBQVMsRUFBRyxDQUM1QixJQUFNbUQsRUFBV3pFLEtBQUtDLE9BQU9xQixFQUFRLEdBQUssSUFJMUMsTUFBTyxDQUhTRCxFQUFPb0QsRUFDTm5ELEVBQW9CLEdBQVhtRCxHQUs1QixNQUFPLENBQUNwRCxFQUFNQyxHRTZIRW9ELENBQWlCdEcsS0FBS3FDLGNBQWVxRCxTQUFTeEMsRUFBTyxLQURyRCxHLEVBQUEsRSw0Q0FFaUJrRCxJLGd4QkFHL0IsT0FIQ3BHLEtBQUtrQyxLQUFLLEdBRkcsS0FFQ2xDLEtBQUtrQyxLQUFLLEdBRlgsS0FHZGxDLEtBQUtzRixNQUFRdEYsS0FBSzRGLGNBRVg1RixPLHFCQVFULFdBQ0UsT0FBT0EsS0FBS2tDLEtBQUssSyxxQkFTbkIsU0FBUUEsR0FJTixPQUhBbEMsS0FBS2tDLEtBQUssR0FBS3dELFNBQVN4RCxFQUFNLElBQzlCbEMsS0FBS3NGLE1BQVF0RixLQUFLNEYsY0FFWDVGLE8sb0JBUVQsV0FDRSxPQUFPQSxLQUFLMkYsR0FBRzVDLFcsb0JBU2pCLFNBQU93RCxHQUNMLElBQUlDLEVBQVNGLEVBQW9CQyxFQUFRdkcsTUFJekMsT0FGU3NHLEVBRFRFLEVBQVNGLEVBQXFCRSxFQUFReEcsTUFDRkEsVyw2QkE3TG5CaUYsSSIsInNvdXJjZXMiOlsid2VicGFjazovL0pEYXRlL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9KRGF0ZS8uL3NyYy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vSkRhdGUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vSkRhdGUvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL0pEYXRlL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vSkRhdGUvLi9zcmMvaGVscGVycy5qcyIsIndlYnBhY2s6Ly9KRGF0ZS8uL3NyYy9jb252ZXJ0ZXIuanMiLCJ3ZWJwYWNrOi8vSkRhdGUvLi9zcmMvamRhdGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJKRGF0ZVwiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJKRGF0ZVwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJKRGF0ZVwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIm1vZHVsZS5leHBvcnRzID0ge1xuICBNT05USF9OQU1FUzogWyfZgdix2YjYsdiv24zZhicsICfYp9ix2K/bjNio2YfYtNiqJywgJ9iu2LHYr9in2K8nLCAn2KrbjNixJywgJ9in2YXYsdiv2KfYrycsICfYtNmH2LHbjNmI2LEnLCAn2YXZh9ixJywgJ9ii2KjYp9mGJywgJ9ii2LDYsScsICfYr9uMJywgJ9io2YfZhdmGJywgJ9in2LPZgdmG2K8nXSxcbiAgQUJCUl9EQVlTOiBbJ9ux2LQnLCAn27LYtCcsICfbs9i0JywgJ9u02LQnLCAn27XYtCcsICfYrCcsICfYtCddLFxuICBEQVlTX05BTUVTOiBbJ9uM2qnYtNmG2KjZhycsICfYr9mI2LTZhtio2YcnLCAn2LPZh+KAjNi02YbYqNmHJywgJ9qG2YfYp9ix2LTZhtio2YcnLCAn2b7Zhtis4oCM2LTZhtio2YcnLCAn2KzZhdi52YcnLCAn2LTZhtio2YcnXSxcbiAgR1JFR09SSUFOX0VQT0NIOiAxNzIxNDI1LjUsXG4gIFBFUlNJQU5fRVBPQ0g6IDE5NDgzMjAuNVxufTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cblxuaW1wb3J0IHtcbiAgTU9OVEhfTkFNRVMsXG4gIEFCQlJfREFZUyxcbiAgREFZU19OQU1FU1xufSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXYoYSwgYikge1xuICByZXR1cm4gTWF0aC5mbG9vcihhIC8gYik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtb2QoYSwgYikge1xuICByZXR1cm4gYSAtIChNYXRoLmZsb29yKGEgLyBiKSAqIGIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZml4TW9udGgoeWVhciwgbW9udGgpIHtcbiAgaWYgKG1vbnRoID4gMTIgfHwgbW9udGggPD0gMCkge1xuICAgIGNvbnN0IHllYXJEaWZmID0gTWF0aC5mbG9vcigobW9udGggLSAxKSAvIDEyKTtcbiAgICBjb25zdCBuZXdZZWFyID0geWVhciAtIHllYXJEaWZmO1xuICAgIGNvbnN0IG5ld01vbnRoID0gbW9udGggLSAoeWVhckRpZmYgKiAxMik7XG5cbiAgICByZXR1cm4gW25ld1llYXIsIG5ld01vbnRoXTtcbiAgfVxuXG4gIHJldHVybiBbeWVhciwgbW9udGhdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gemVyb0xlYWRpbmcoc3RyKSB7XG4gIGlmIChzdHIgJiYgc3RyLmxlbmd0aCA9PT0gMSkgeyByZXR1cm4gYDAke3N0cn1gOyB9XG4gIHJldHVybiBzdHI7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlWWVhcihzdHIsIGRhdGUpIHtcbiAgY29uc3QgbWF0Y2ggPSBzdHIubWF0Y2goL1t5WV0rLyk7XG4gIGlmICghbWF0Y2gpIHsgcmV0dXJuIHN0cjsgfVxuICBzd2l0Y2ggKG1hdGNoWzBdKSB7XG4gICAgY2FzZSAnWVlZWSc6XG4gICAgY2FzZSAnWVlZJzoge1xuICAgICAgY29uc3QgdmFsdWUgPSByZXBsYWNlWWVhcihzdHIucmVwbGFjZShtYXRjaCwgZGF0ZS5nZXRGdWxsWWVhcigpKSwgZGF0ZSk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGNhc2UgJ1lZJzoge1xuICAgICAgY29uc3QgdmFsdWUgPSByZXBsYWNlWWVhcihcbiAgICAgICAgc3RyLnJlcGxhY2UobWF0Y2gsIFN0cmluZyhkYXRlLmdldEZ1bGxZZWFyKCkpLnNsaWNlKDIpKSwgZGF0ZVxuICAgICAgKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VNb250aChzdHIsIGRhdGUpIHtcbiAgY29uc3QgbWF0Y2ggPSBzdHIubWF0Y2goL1ttTV0rLyk7XG4gIGlmICghbWF0Y2gpIHsgcmV0dXJuIHN0cjsgfVxuICBzd2l0Y2ggKG1hdGNoWzBdKSB7XG4gICAgY2FzZSAnTSc6IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gcmVwbGFjZU1vbnRoKHN0ci5yZXBsYWNlKG1hdGNoLCBkYXRlLmdldE1vbnRoKCkpLCBkYXRlKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY2FzZSAnTU0nOiB7XG4gICAgICBjb25zdCB6ZXJvTGVhZGluZ01vbnRoID0gemVyb0xlYWRpbmcoZGF0ZS5nZXRNb250aCgpLnRvU3RyaW5nKCkpO1xuICAgICAgY29uc3QgdmFsdWUgPSByZXBsYWNlTW9udGgoc3RyLnJlcGxhY2UobWF0Y2gsIHplcm9MZWFkaW5nTW9udGgpLCBkYXRlKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY2FzZSAnTU1NJzpcbiAgICBjYXNlICdNTU1NJzoge1xuICAgICAgY29uc3QgdmFsdWUgPSByZXBsYWNlTW9udGgoXG4gICAgICAgIHN0ci5yZXBsYWNlKG1hdGNoLCBNT05USF9OQU1FU1tkYXRlLmdldE1vbnRoKCkgLSAxXSksIGRhdGVcbiAgICAgICk7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIGRlZmF1bHQ6IHtcbiAgICAgIHJldHVybiBzdHI7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlRGF5KHN0ciwgZGF0ZSkge1xuICBjb25zdCBtYXRjaCA9IHN0ci5tYXRjaCgvW2REXSsvKTtcbiAgaWYgKCFtYXRjaCkgeyByZXR1cm4gc3RyOyB9XG4gIHN3aXRjaCAobWF0Y2hbMF0pIHtcbiAgICBjYXNlICdEJzoge1xuICAgICAgY29uc3QgdmFsdWUgPSByZXBsYWNlRGF5KHN0ci5yZXBsYWNlKG1hdGNoLCBkYXRlLmdldERhdGUoKSksIGRhdGUpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjYXNlICdERCc6IHtcbiAgICAgIGNvbnN0IHplcm9MZWFkaW5nRGF0ZSA9IHplcm9MZWFkaW5nKGRhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkpO1xuICAgICAgY29uc3QgdmFsdWUgPSByZXBsYWNlRGF5KHN0ci5yZXBsYWNlKG1hdGNoLCB6ZXJvTGVhZGluZ0RhdGUpLCBkYXRlKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgY2FzZSAnZCc6XG4gICAgY2FzZSAnZGQnOiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHJlcGxhY2VEYXkoc3RyLnJlcGxhY2UobWF0Y2gsIEFCQlJfREFZU1tkYXRlLmdldERheSgpXSksIGRhdGUpO1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBjYXNlICdkZGQnOlxuICAgIGNhc2UgJ2RkZGQnOiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHJlcGxhY2VEYXkoc3RyLnJlcGxhY2UobWF0Y2gsIERBWVNfTkFNRVNbZGF0ZS5nZXREYXkoKV0pLCBkYXRlKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IG1vZCB9IGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQgeyBHUkVHT1JJQU5fRVBPQ0gsIFBFUlNJQU5fRVBPQ0ggfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnZlcnRlciB7XG4gIC8vICBMRUFQX0dSRUdPUklBTiAgLS0gIElzIGEgZ2l2ZW4geWVhciBpbiB0aGUgR3JlZ29yaWFuIGNhbGVuZGFyIGEgbGVhcCB5ZWFyP1xuICBzdGF0aWMgbGVhcEdyZWdvcmlhbih5ZWFyKSB7XG4gICAgcmV0dXJuICgoeWVhciAlIDQpID09PSAwKVxuICAgICAgJiYgKCEoKCh5ZWFyICUgMTAwKSA9PT0gMCkgJiYgKCh5ZWFyICUgNDAwKSAhPT0gMCkpKTtcbiAgfVxuXG4gIC8vIEdSRUdPUklBTl9UT19KRCAgLS0gIERldGVybWluZSBKdWxpYW4gZGF5IG51bWJlciBmcm9tIEdyZWdvcmlhbiBjYWxlbmRhciBkYXRlXG4gIHN0YXRpYyBncmVnb3JpYW5Ub0p1bGlhbih5ZWFyLCBtb250aCwgZGF5KSB7XG4gICAgbGV0IHBhZDtcbiAgICBpZiAobW9udGggPD0gMikge1xuICAgICAgcGFkID0gMDtcbiAgICB9IGVsc2UgaWYgKENvbnZlcnRlci5sZWFwR3JlZ29yaWFuKHllYXIpKSB7XG4gICAgICBwYWQgPSAtMTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFkID0gLTI7XG4gICAgfVxuXG4gICAgcmV0dXJuIChHUkVHT1JJQU5fRVBPQ0ggLSAxKVxuICAgICAgKyAoMzY1ICogKHllYXIgLSAxKSlcbiAgICAgICsgTWF0aC5mbG9vcigoeWVhciAtIDEpIC8gNClcbiAgICAgICsgKC1NYXRoLmZsb29yKCh5ZWFyIC0gMSkgLyAxMDApKVxuICAgICAgKyBNYXRoLmZsb29yKCh5ZWFyIC0gMSkgLyA0MDApXG4gICAgICArIE1hdGguZmxvb3IoKCgoMzY3ICogbW9udGgpIC0gMzYyKSAvIDEyKSArIChwYWQgKyBkYXkpKTtcbiAgfVxuXG4gIC8vICBKRF9UT19HUkVHT1JJQU4gIC0tICBDYWxjdWxhdGUgR3JlZ29yaWFuIGNhbGVuZGFyIGRhdGUgZnJvbSBKdWxpYW4gZGF5XG4gIHN0YXRpYyBqdWxpYW5Ub0dyZWdvcmlhbihqZCkge1xuICAgIGNvbnN0IHdqZCA9IE1hdGguZmxvb3IoamQgLSAwLjUpICsgMC41O1xuICAgIGNvbnN0IGRlcG9jaCA9IHdqZCAtIEdSRUdPUklBTl9FUE9DSDtcbiAgICBjb25zdCBxdWFkcmljZW50ID0gTWF0aC5mbG9vcihkZXBvY2ggLyAxNDYwOTcpO1xuICAgIGNvbnN0IGRxYyA9IG1vZChkZXBvY2gsIDE0NjA5Nyk7XG4gICAgY29uc3QgY2VudCA9IE1hdGguZmxvb3IoZHFjIC8gMzY1MjQpO1xuICAgIGNvbnN0IGRjZW50ID0gbW9kKGRxYywgMzY1MjQpO1xuICAgIGNvbnN0IHF1YWQgPSBNYXRoLmZsb29yKGRjZW50IC8gMTQ2MSk7XG4gICAgY29uc3QgZHF1YWQgPSBtb2QoZGNlbnQsIDE0NjEpO1xuICAgIGNvbnN0IHlpbmRleCA9IE1hdGguZmxvb3IoZHF1YWQgLyAzNjUpO1xuICAgIGxldCB5ZWFyID0gKHF1YWRyaWNlbnQgKiA0MDApICsgKGNlbnQgKiAxMDApICsgKHF1YWQgKiA0KSArIHlpbmRleDtcbiAgICBpZiAoISgoY2VudCA9PT0gNCkgfHwgKHlpbmRleCA9PT0gNCkpKSB7IHllYXIgKz0gMTsgfVxuICAgIGNvbnN0IHllYXJkYXkgPSB3amQgLSBDb252ZXJ0ZXIuZ3JlZ29yaWFuVG9KdWxpYW4oeWVhciwgMSwgMSk7XG4gICAgbGV0IGxlYXBhZGo7XG4gICAgaWYgKHdqZCA8IENvbnZlcnRlci5ncmVnb3JpYW5Ub0p1bGlhbih5ZWFyLCAzLCAxKSkge1xuICAgICAgbGVhcGFkaiA9IDA7XG4gICAgfSBlbHNlIGlmIChDb252ZXJ0ZXIubGVhcEdyZWdvcmlhbih5ZWFyKSA/IDEgOiAyKSB7XG4gICAgICBsZWFwYWRqID0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVhcGFkaiA9IDI7XG4gICAgfVxuICAgIGNvbnN0IG1vbnRoID0gTWF0aC5mbG9vcigoKCh5ZWFyZGF5ICsgbGVhcGFkaikgKiAxMikgKyAzNzMpIC8gMzY3KTtcbiAgICBjb25zdCBkYXkgPSAod2pkIC0gQ29udmVydGVyLmdyZWdvcmlhblRvSnVsaWFuKHllYXIsIG1vbnRoLCAxKSkgKyAxO1xuXG4gICAgcmV0dXJuIFt5ZWFyLCBtb250aCwgZGF5XTtcbiAgfVxuXG4gIC8vICBMRUFQX1BFUlNJQU4gIC0tICBJcyBhIGdpdmVuIHllYXIgYSBsZWFwIHllYXIgaW4gdGhlIFBlcnNpYW4gY2FsZW5kYXIgP1xuICBzdGF0aWMgbGVhcFBlcnNpYW4oeWVhcikge1xuICAgIGlmICh5ZWFyID09PSAxNDAzKSByZXR1cm4gdHJ1ZTsgLy8gV2VsbCwgYWxnb3JpdGhtcyBhcmUgbm90IHBlcmZlY3QgXFxvL1xuICAgIHJldHVybiAoXG4gICAgICAoKCgoKHllYXIgLSAoKHllYXIgPiAwKSA/IDQ3NCA6IDQ3MykpICUgMjgyMCkgKyA0NzQpICsgMzgpICogNjgyKSAlIDI4MTZcbiAgICApIDwgNjgyO1xuICB9XG5cbiAgLy8gIFBFUlNJQU5fVE9fSkQgIC0tICBEZXRlcm1pbmUgSnVsaWFuIGRheSBmcm9tIFBlcnNpYW4gZGF0ZVxuICBzdGF0aWMgcGVyc2lhblRvSnVsaWFuKHllYXIsIG1vbnRoLCBkYXkpIHtcbiAgICBjb25zdCBlcGJhc2UgPSB5ZWFyIC0gKCh5ZWFyID49IDApID8gNDc0IDogNDczKTtcbiAgICBjb25zdCBlcHllYXIgPSA0NzQgKyBtb2QoZXBiYXNlLCAyODIwKTtcblxuICAgIHJldHVybiBkYXlcbiAgICAgICsgKChtb250aCA8PSA3KVxuICAgICAgICA/ICgobW9udGggLSAxKSAqIDMxKVxuICAgICAgICA6ICgoKG1vbnRoIC0gMSkgKiAzMCkgKyA2KVxuICAgICAgKVxuICAgICAgKyBNYXRoLmZsb29yKCgoZXB5ZWFyICogNjgyKSAtIDExMCkgLyAyODE2KVxuICAgICAgKyAoKGVweWVhciAtIDEpICogMzY1KVxuICAgICAgKyAoTWF0aC5mbG9vcihlcGJhc2UgLyAyODIwKSAqIDEwMjk5ODMpICsgKFBFUlNJQU5fRVBPQ0ggLSAxKTtcbiAgfVxuXG4gIC8vICBKRF9UT19QRVJTSUFOICAtLSAgQ2FsY3VsYXRlIFBlcnNpYW4gZGF0ZSBmcm9tIEp1bGlhbiBkYXlcbiAgc3RhdGljIGp1bGlhblRvUGVyc2lhbihqZCkge1xuICAgIGNvbnN0IG5qZCA9IE1hdGguZmxvb3IoamQpICsgMC41O1xuICAgIGNvbnN0IGRlcG9jaCA9IG5qZCAtIENvbnZlcnRlci5wZXJzaWFuVG9KdWxpYW4oNDc1LCAxLCAxKTtcbiAgICBjb25zdCBjeWNsZSA9IE1hdGguZmxvb3IoZGVwb2NoIC8gMTAyOTk4Myk7XG4gICAgY29uc3QgY3llYXIgPSBtb2QoZGVwb2NoLCAxMDI5OTgzKTtcbiAgICBsZXQgeWN5Y2xlO1xuICAgIGlmIChjeWVhciA9PT0gMTAyOTk4Mikge1xuICAgICAgeWN5Y2xlID0gMjgyMDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYXV4MSA9IE1hdGguZmxvb3IoY3llYXIgLyAzNjYpO1xuICAgICAgY29uc3QgYXV4MiA9IG1vZChjeWVhciwgMzY2KTtcbiAgICAgIHljeWNsZSA9IE1hdGguZmxvb3IoKCgyMTM0ICogYXV4MSkgKyAoMjgxNiAqIGF1eDIpICsgMjgxNSkgLyAxMDI4NTIyKVxuICAgICAgICArIGF1eDEgKyAxO1xuICAgIH1cbiAgICBsZXQgeWVhciA9IHljeWNsZSArICgyODIwICogY3ljbGUpICsgNDc0O1xuICAgIGlmICh5ZWFyIDw9IDApIHtcbiAgICAgIHllYXIgLT0gMTtcbiAgICB9XG4gICAgY29uc3QgeWRheSA9IChuamQgLSBDb252ZXJ0ZXIucGVyc2lhblRvSnVsaWFuKHllYXIsIDEsIDEpKSArIDE7XG4gICAgY29uc3QgbW9udGggPSAoeWRheSA8PSAxODYpID8gTWF0aC5jZWlsKHlkYXkgLyAzMSkgOiBNYXRoLmNlaWwoKHlkYXkgLSA2KSAvIDMwKTtcbiAgICBjb25zdCBkYXkgPSAobmpkIC0gQ29udmVydGVyLnBlcnNpYW5Ub0p1bGlhbih5ZWFyLCBtb250aCwgMSkpICsgMTtcblxuICAgIHJldHVybiBbeWVhciwgbW9udGgsIGRheV07XG4gIH1cblxuICBzdGF0aWMgcGVyc2lhblRvR3JlZ29yaWFuKHllYXIsIG1vbnRoLCBkYXkpIHtcbiAgICBjb25zdCBqdWxpYW4gPSBDb252ZXJ0ZXIucGVyc2lhblRvSnVsaWFuKHllYXIsIG1vbnRoLCBkYXkpO1xuXG4gICAgcmV0dXJuIENvbnZlcnRlci5qdWxpYW5Ub0dyZWdvcmlhbihqdWxpYW4pO1xuICB9XG5cbiAgc3RhdGljIGdyZWdvcmlhblRvUGVyc2lhbih5ZWFyLCBtb250aCwgZGF5KSB7XG4gICAgY29uc3QganVsaWFuID0gQ29udmVydGVyLmdyZWdvcmlhblRvSnVsaWFuKHllYXIsIG1vbnRoLCBkYXkpO1xuXG4gICAgcmV0dXJuIENvbnZlcnRlci5qdWxpYW5Ub1BlcnNpYW4oanVsaWFuKTtcbiAgfVxufVxuIiwiLypcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hcmFzaG0vSkRhdGVcbiAqIEBhdXRob3I6IEFyYXNoIE1vdXNhdmlcbiAqL1xuXG5pbXBvcnQgQ29udmVydGVyIGZyb20gJy4vY29udmVydGVyJztcbmltcG9ydCAqIGFzIGhlbHBlcnMgZnJvbSAnLi9oZWxwZXJzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSkRhdGUge1xuICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnc1swXSkgfHwgYXJnc1swXSBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgIFt0aGlzLmlucHV0XSA9IGFyZ3M7XG4gICAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PT0gMykge1xuICAgICAgdGhpcy5pbnB1dCA9IGFyZ3M7XG4gICAgfSBlbHNlIGlmICghYXJncy5sZW5ndGgpIHtcbiAgICAgIHRoaXMuaW5wdXQgPSBuZXcgRGF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgaW5wdXQnKTtcbiAgICB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLmlucHV0KSkge1xuICAgICAgdGhpcy5kYXRlID0gdGhpcy5pbnB1dC5tYXAoKG51bSkgPT4gcGFyc2VJbnQobnVtLCAxMCkpO1xuICAgICAgdGhpcy5fZCA9IHRoaXMudG9HcmVnb3JpYW4oKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaW5wdXQgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICB0aGlzLl9kID0gdGhpcy5pbnB1dDtcbiAgICAgIHRoaXMuZGF0ZSA9IEpEYXRlLnRvSmFsYWxpKHRoaXMuaW5wdXQpO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAqIENvdmVydHMgYSBHcmVnb3JpYW4gZGF0ZSB0byBKYWxhbGkgZGF0ZVxuICAgKlxuICAgKiBAcGFyYW1zIHtEYXRlfSBkYXRlXG4gICAqIEByZXR1cm4ge0FycmF5fVxuICAgKi9cbiAgc3RhdGljIHRvSmFsYWxpKGRhdGUpIHtcbiAgICBjb25zdCBqdWxpYW5EYXRlID0gQ29udmVydGVyLmdyZWdvcmlhblRvSnVsaWFuKFxuICAgICAgZGF0ZS5nZXRGdWxsWWVhcigpLFxuICAgICAgZGF0ZS5nZXRNb250aCgpICsgMSxcbiAgICAgIGRhdGUuZ2V0RGF0ZSgpXG4gICAgKTtcbiAgICBjb25zdCBqZGF0ZSA9IENvbnZlcnRlci5qdWxpYW5Ub1BlcnNpYW4oanVsaWFuRGF0ZSk7XG5cbiAgICByZXR1cm4gamRhdGU7XG4gIH1cblxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2FtZWxjYXNlXG4gIHN0YXRpYyB0b19qYWxhbGkoZGF0ZSkgeyByZXR1cm4gSkRhdGUudG9KYWxhbGkoZGF0ZSk7IH1cblxuICAvKlxuICAgKiBjb252ZXJ0cyBhIEphbGFsaSBkYXRlIHRvIEdyZWdvcmlhblxuICAgKlxuICAgKiBAcGFyYW1zIHtOdW1iZXJ9IHllYXJcbiAgICogQHBhcmFtcyB7TnVtYmVyfSBtb250aFxuICAgKiBAcGFyYW1zIHtOdW1iZXJ9IGRheVxuICAgKiBAcmV0dXJuIHtEYXRlfVxuICAgKi9cbiAgc3RhdGljIHRvR3JlZ29yaWFuKHllYXIsIG1vbnRoLCBkYXkpIHtcbiAgICBjb25zdCBnZGF0ZSA9IENvbnZlcnRlci5qdWxpYW5Ub0dyZWdvcmlhbihcbiAgICAgIENvbnZlcnRlci5wZXJzaWFuVG9KdWxpYW4oeWVhciwgbW9udGgsIGRheSlcbiAgICApO1xuXG4gICAgcmV0dXJuIG5ldyBEYXRlKCtnZGF0ZVswXSwgK2dkYXRlWzFdIC0gMSwgK2dkYXRlWzJdKTtcbiAgfVxuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2VcbiAgc3RhdGljIHRvX2dyZWdvcmlhbih5ZWFyLCBtb250aCwgZGF5KSB7IHJldHVybiBKRGF0ZS50b0dyZWdvcmlhbih5ZWFyLCBtb250aCwgZGF5KTsgfVxuXG4gIC8qXG4gICAqIENoZWNrcyBpZiBhIGdpdmVuIHllYXIgaXMgYSBsZWFwIHllYXIgb3Igbm90XG4gICAqXG4gICAqIEBwYXJhbXMge051bWJlcn0geWVhclxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgc3RhdGljIGlzTGVhcFllYXIoeWVhcikge1xuICAgIHJldHVybiBDb252ZXJ0ZXIubGVhcFBlcnNpYW4oeWVhcik7XG4gIH1cblxuICAvKlxuICAgKiBSZXR1cm5zIG1vbnRoIGxlbmd0aC5cbiAgICpcbiAgICogQHBhcmFtcyB7TnVtYmVyfSB5ZWFyXG4gICAqIEBwYXJhbXMge051bWJlcn0gbW9udGggemVybyBiYXNlZFxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAqL1xuICBzdGF0aWMgZGF5c0luTW9udGgoeWVhciwgbW9udGgpIHtcbiAgICBsZXQgY2FsY2VkWWVhciA9IHllYXIgLSBNYXRoLmZsb29yKG1vbnRoIC8gMTIpO1xuICAgIGxldCBjYWxjZWRNb250aCA9IG1vbnRoIC0gKE1hdGguZmxvb3IobW9udGggLyAxMikgKiAxMik7XG5cbiAgICBpZiAoY2FsY2VkTW9udGggPCAwKSB7XG4gICAgICBjYWxjZWRNb250aCArPSAxMjtcbiAgICAgIGNhbGNlZFllYXIgLT0gMTtcbiAgICB9IGVsc2UgaWYgKGNhbGNlZE1vbnRoID09PSAwKSB7XG4gICAgICBjYWxjZWRNb250aCA9IDEyO1xuICAgIH1cblxuICAgIGlmIChjYWxjZWRNb250aCA8IDYpIHtcbiAgICAgIHJldHVybiAzMTtcbiAgICB9IGlmIChjYWxjZWRNb250aCA8IDExKSB7XG4gICAgICByZXR1cm4gMzA7XG4gICAgfSBpZiAoSkRhdGUuaXNMZWFwWWVhcihjYWxjZWRZZWFyKSkge1xuICAgICAgcmV0dXJuIDMwO1xuICAgIH1cbiAgICByZXR1cm4gMjk7XG4gIH1cblxuICAvKlxuICAgKiBDb252ZXJ0cyBKRGF0ZSBkYXRlIHRvIEdyZWdvcmlhblxuICAgKi9cbiAgdG9HcmVnb3JpYW4oKSB7XG4gICAgcmV0dXJuIEpEYXRlLnRvR3JlZ29yaWFuKHRoaXMuZGF0ZVswXSwgdGhpcy5kYXRlWzFdLCB0aGlzLmRhdGVbMl0pO1xuICB9XG5cbiAgLypcbiAgICogU2hvd3MgSmFsYWxpJ3MgZnVsbCB5ZWFyLCBleDogMTM5M1xuICAgKlxuICAgKiBAcmV0dXJuIHtJbnRlZ2VyfVxuICAgKi9cbiAgZ2V0RnVsbFllYXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0ZVswXTtcbiAgfVxuXG4gIC8qXG4gICAqIFNldHMgdGhlIEphbGFsaSBmdWxsIHllYXJcbiAgICpcbiAgICogQHBhcmFtcyB7TnVtYmVyfSB5ZWFyXG4gICAqIEByZXR1cm4ge0pEYXRlfVxuICAgKi9cbiAgc2V0RnVsbFllYXIoeWVhcikge1xuICAgIHRoaXMuZGF0ZVswXSA9IHBhcnNlSW50KHllYXIsIDEwKTtcbiAgICB0aGlzLmlucHV0ID0gdGhpcy50b0dyZWdvcmlhbigpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLypcbiAgICogU2hvd3MgSmFsYWxpIG1vbnRoIG51bWJlci5cbiAgICpcbiAgICogQHJldHVybiB7TnVtYmVyfSBKYWxhbGkgbW9udGggbnVtYmVyXG4gICAqL1xuICBnZXRNb250aCgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRlWzFdO1xuICB9XG5cbiAgLypcbiAgICogU2V0cyB0aGUgSmFsYWxpIG1vbnRoIG51bWJlci4gQW4gaW50ZWdlciBiZXR3ZWVuIDAgYW5kIDExXG4gICAqXG4gICAqIEBwYXJhbXMge051bWJlcn0gbW9udGhcbiAgICogQHJldHVybnMge0pEYXRlfVxuICAgKi9cbiAgc2V0TW9udGgobW9udGgpIHtcbiAgICBjb25zdCBmaXhlZCA9IGhlbHBlcnMuZml4TW9udGgodGhpcy5nZXRGdWxsWWVhcigpLCBwYXJzZUludChtb250aCwgMTApKTtcbiAgICBbdGhpcy5kYXRlWzBdLCB0aGlzLmRhdGVbMV1dID0gZml4ZWQ7XG4gICAgdGhpcy5pbnB1dCA9IHRoaXMudG9HcmVnb3JpYW4oKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLypcbiAgICogU2hvd3MgSmFsYWxpIGRheSBudW1iZXIuIEEgbnVtYmVyIGJldHdlZW4gMCB0byAzMVxuICAgKlxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9IEphbGFsaSBkYXkgbnVtYmVyXG4gICAqL1xuICBnZXREYXRlKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGVbMl07XG4gIH1cblxuICAvKlxuICAgKiBTZXRzIEphbGFsaSBkYXkgbnVtYmVyLiBBIG51bWJlciBiZXR3ZWVuIDAgdG8gMzFcbiAgICpcbiAgICogQHBhcmFtcyB7TnVtYmVyfSBkYXRlXG4gICAqIEByZXR1cm4ge0pEYXRlfVxuICAgKi9cbiAgc2V0RGF0ZShkYXRlKSB7XG4gICAgdGhpcy5kYXRlWzJdID0gcGFyc2VJbnQoZGF0ZSwgMTApO1xuICAgIHRoaXMuaW5wdXQgPSB0aGlzLnRvR3JlZ29yaWFuKCk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qXG4gICAqIFJldHVybnMgdGhlIGRheSBvZiB0aGUgd2VlayBmb3IgdGhlIHNwZWNpZmllZCBkYXRlLiBBIG51bWJlciBiZXR3ZWVuIDAgdG8gNlxuICAgKlxuICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuICAgKi9cbiAgZ2V0RGF5KCkge1xuICAgIHJldHVybiB0aGlzLl9kLmdldERheSgpO1xuICB9XG5cbiAgLypcbiAgICogUmV0dXJucyBhIGZvcm1hdGVkIG91dHB1dCBvZiBjdXJyZW50IGRhdGVcbiAgICpcbiAgICogQHBhcmFtcyB7U3RyaW5nfSBmb3JtYXRcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgZm9ybWF0KGZvcm1hdCkge1xuICAgIGxldCByZXN1bHQgPSBoZWxwZXJzLnJlcGxhY2VZZWFyKGZvcm1hdCwgdGhpcyk7XG4gICAgcmVzdWx0ID0gaGVscGVycy5yZXBsYWNlTW9udGgocmVzdWx0LCB0aGlzKTtcbiAgICByZXN1bHQgPSBoZWxwZXJzLnJlcGxhY2VEYXkocmVzdWx0LCB0aGlzKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ0aGlzIiwiTU9OVEhfTkFNRVMiLCJBQkJSX0RBWVMiLCJEQVlTX05BTUVTIiwiR1JFR09SSUFOX0VQT0NIIiwiUEVSU0lBTl9FUE9DSCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsIl9fd2VicGFja19tb2R1bGVzX18iLCJkIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwibW9kIiwiYSIsImIiLCJNYXRoIiwiZmxvb3IiLCJ6ZXJvTGVhZGluZyIsInN0ciIsImxlbmd0aCIsInJlcGxhY2VZZWFyIiwiZGF0ZSIsIm1hdGNoIiwicmVwbGFjZSIsImdldEZ1bGxZZWFyIiwiU3RyaW5nIiwic2xpY2UiLCJyZXBsYWNlTW9udGgiLCJnZXRNb250aCIsInplcm9MZWFkaW5nTW9udGgiLCJ0b1N0cmluZyIsInJlcGxhY2VEYXkiLCJnZXREYXRlIiwiemVyb0xlYWRpbmdEYXRlIiwiZ2V0RGF5IiwiQ29udmVydGVyIiwieWVhciIsIm1vbnRoIiwiZGF5IiwicGFkIiwibGVhcEdyZWdvcmlhbiIsImpkIiwid2pkIiwiZGVwb2NoIiwicXVhZHJpY2VudCIsImRxYyIsImNlbnQiLCJkY2VudCIsInF1YWQiLCJkcXVhZCIsInlpbmRleCIsImxlYXBhZGoiLCJ5ZWFyZGF5IiwiZ3JlZ29yaWFuVG9KdWxpYW4iLCJlcGJhc2UiLCJlcHllYXIiLCJ5Y3ljbGUiLCJuamQiLCJwZXJzaWFuVG9KdWxpYW4iLCJjeWNsZSIsImN5ZWFyIiwiYXV4MSIsImF1eDIiLCJ5ZGF5IiwiY2VpbCIsImp1bGlhbiIsImp1bGlhblRvR3JlZ29yaWFuIiwianVsaWFuVG9QZXJzaWFuIiwiSkRhdGUiLCJhcmdzIiwiQXJyYXkiLCJpc0FycmF5IiwiRGF0ZSIsImlucHV0IiwiRXJyb3IiLCJtYXAiLCJudW0iLCJwYXJzZUludCIsIl9kIiwidG9HcmVnb3JpYW4iLCJ0b0phbGFsaSIsImp1bGlhbkRhdGUiLCJnZGF0ZSIsImxlYXBQZXJzaWFuIiwiY2FsY2VkWWVhciIsImNhbGNlZE1vbnRoIiwiaXNMZWFwWWVhciIsImZpeGVkIiwieWVhckRpZmYiLCJoZWxwZXJzIiwiZm9ybWF0IiwicmVzdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==